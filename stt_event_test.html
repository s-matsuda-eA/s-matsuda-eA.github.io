<!DOCTYPE html>
<html lang="ja">
<meta charset="utf-8" />

<head>
	<meta name="robots" content="noindex">
	<title>イベントフックテスト</title>
	<script src="https://sandbox-d.ea-shutto-translation.net/trans.js?id=30516"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
<h1>イベントフックテスト</h1>
<p id="hook-load">loadが発火しました</p>
<p>動的取得のテストもします</p>
<p id="test"></p>

<script>
	__stt.on('load', function () {
		console.log("fire the STT load event")
		$('p#hook-load').text("loadイベントが発火しました")
	});

	__stt.on('tl.load', function () {
		console.log("fire the STT tl.load event")
	});

	__stt.on('tl.loaded', function () {
		console.log("fire the STT tl.loaded event")
	});

			//raw
			__stt.get('lang', function (lang) {
				console.log("get the STT lang event: %o", lang)
			});

			// ContentLoaded
			window.addEventListener('DOMContentLoaded', (event) => {
				console.log("window Contentload");
				__stt.get('lang', function (lang) {
					console.log("fire the STT lang event from Contentload: %o", lang)
				});
			});

			// load
			window.addEventListener("load", (event) => {
				console.log("window load");
				__stt.get('lang', function (lang) {
					console.log("fire the STT lang event from load: %o", lang)
				});
			});
		

		__stt.on('lang.change', function (lang) {
			console.log("fire the STT lang.change event: %o", lang)
			console.log("navigator langage %o", navigator.language)
			if (/^en\b/.test(navigator.language)) {
				// hoge
				console.log("browser lang is en")
			}
	});


		__stt.on('lang.changed', function (lang) {
		console.log("fire the STT lang.changed event: %o", lang)
	});

	__stt.on('selectLang', function () {
		console.log("fire the STT selectLang event")
	});

	__stt.on('setLang', function () {
		console.log("fire the STT setLang event")
	});

	__stt.on('setsetLangHit', function () {
		console.log("fire the STT setLangHit event")
	});


	function ajaxTest() {
		const myUrl = 'https://s-matsuda-ea.github.io/cors.html'
		$.ajax({
			type: "GET",
			url: myUrl,
		})
			.done(function (result) {
				$('p#test').text(result)
			})
			.fail(function () { })
			.always(function (result) {
			});
	}
	ajaxTest();
</script>

<body>

</html>